{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\W24088-User\\\\Desktop\\\\claude-project\\\\Claude-Project\\\\Frontend\\\\src\\\\components\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\n/**\n * Protected Route Component - requires authentication.\n * \n * Usage:\n * <Route path=\"/dashboard\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\n * \n * Security behavior:\n * - If not authenticated, redirects to login\n * - Preserves intended destination for redirect after login\n * - Shows loading state while checking auth\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProtectedRoute = ({\n  children\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    // Save the attempted URL for redirect after login\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n\n/**\n * Admin Route Component - requires ADMIN role.\n * \n * Usage:\n * <Route path=\"/users\" element={<AdminRoute><UserManagement /></AdminRoute>} />\n * \n * Security behavior:\n * - First checks authentication (redirects to login if not)\n * - Then checks for ADMIN role (shows access denied if not admin)\n * - Never shows admin content to non-admin users\n */\n_s(ProtectedRoute, \"fNj96oVmPd4sFazcimgf9N7S8ao=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport const AdminRoute = ({\n  children\n}) => {\n  _s2();\n  const {\n    isAuthenticated,\n    isAdmin,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Show access denied if not admin\n  if (!isAdmin) {\n    return /*#__PURE__*/_jsxDEV(AccessDenied, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n\n/**\n * Role-based Route Component - requires specific role(s).\n * \n * Usage:\n * <Route \n *   path=\"/reports\" \n *   element={\n *     <RoleRoute allowedRoles={['ROLE_ADMIN', 'ROLE_TEACHER']}>\n *       <Reports />\n *     </RoleRoute>\n *   } \n * />\n * \n * @param {string[]} allowedRoles - Array of roles that can access this route\n */\n_s2(AdminRoute, \"yEh7LKoC3G0LVVV9gFErT07ugdk=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c2 = AdminRoute;\nexport const RoleRoute = ({\n  children,\n  allowedRoles\n}) => {\n  _s3();\n  const {\n    isAuthenticated,\n    hasAnyRole,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Show access denied if user doesn't have required role\n  if (!hasAnyRole(allowedRoles)) {\n    return /*#__PURE__*/_jsxDEV(AccessDenied, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n\n/**\n * Access Denied Component - shown when user lacks permissions.\n * \n * Displays a friendly message and provides navigation options.\n */\n_s3(RoleRoute, \"42flL4EJeqtaSZnvuzGzfJzhCak=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c3 = RoleRoute;\nexport const AccessDenied = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"access-denied\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"access-denied-icon\",\n        children: \"\\uD83D\\uDEAB\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"access-denied-title\",\n        children: \"Access Denied\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"access-denied-message\",\n        children: [\"You don't have permission to access this page.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), \"Please contact your administrator if you believe this is an error.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"/dashboard\",\n        className: \"btn btn-primary\",\n        children: \"Go to Dashboard\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 5\n  }, this);\n};\n_c4 = AccessDenied;\nexport default ProtectedRoute;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"AdminRoute\");\n$RefreshReg$(_c3, \"RoleRoute\");\n$RefreshReg$(_c4, \"AccessDenied\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","_s","isAuthenticated","loading","location","className","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","_c","AdminRoute","_s2","isAdmin","AccessDenied","_c2","RoleRoute","allowedRoles","_s3","hasAnyRole","_c3","href","_c4","$RefreshReg$"],"sources":["C:/Users/W24088-User/Desktop/claude-project/Claude-Project/Frontend/src/components/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\n\n/**\n * Protected Route Component - requires authentication.\n * \n * Usage:\n * <Route path=\"/dashboard\" element={<ProtectedRoute><Dashboard /></ProtectedRoute>} />\n * \n * Security behavior:\n * - If not authenticated, redirects to login\n * - Preserves intended destination for redirect after login\n * - Shows loading state while checking auth\n */\nexport const ProtectedRoute = ({ children }) => {\n  const { isAuthenticated, loading } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    // Save the attempted URL for redirect after login\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  return children;\n};\n\n/**\n * Admin Route Component - requires ADMIN role.\n * \n * Usage:\n * <Route path=\"/users\" element={<AdminRoute><UserManagement /></AdminRoute>} />\n * \n * Security behavior:\n * - First checks authentication (redirects to login if not)\n * - Then checks for ADMIN role (shows access denied if not admin)\n * - Never shows admin content to non-admin users\n */\nexport const AdminRoute = ({ children }) => {\n  const { isAuthenticated, isAdmin, loading } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // Show access denied if not admin\n  if (!isAdmin) {\n    return <AccessDenied />;\n  }\n\n  return children;\n};\n\n/**\n * Role-based Route Component - requires specific role(s).\n * \n * Usage:\n * <Route \n *   path=\"/reports\" \n *   element={\n *     <RoleRoute allowedRoles={['ROLE_ADMIN', 'ROLE_TEACHER']}>\n *       <Reports />\n *     </RoleRoute>\n *   } \n * />\n * \n * @param {string[]} allowedRoles - Array of roles that can access this route\n */\nexport const RoleRoute = ({ children, allowedRoles }) => {\n  const { isAuthenticated, hasAnyRole, loading } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking authentication\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\"></div>\n      </div>\n    );\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated) {\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\n  }\n\n  // Show access denied if user doesn't have required role\n  if (!hasAnyRole(allowedRoles)) {\n    return <AccessDenied />;\n  }\n\n  return children;\n};\n\n/**\n * Access Denied Component - shown when user lacks permissions.\n * \n * Displays a friendly message and provides navigation options.\n */\nexport const AccessDenied = () => {\n  return (\n    <div className=\"container\">\n      <div className=\"access-denied\">\n        <div className=\"access-denied-icon\">&#x1F6AB;</div>\n        <h1 className=\"access-denied-title\">Access Denied</h1>\n        <p className=\"access-denied-message\">\n          You don't have permission to access this page.\n          <br />\n          Please contact your administrator if you believe this is an error.\n        </p>\n        <a href=\"/dashboard\" className=\"btn btn-primary\">\n          Go to Dashboard\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default ProtectedRoute;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}